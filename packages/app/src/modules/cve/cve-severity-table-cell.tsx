import React from "react";

import {maxBy} from "lodash";
import {TableCell} from "@mui/material";
import {styled} from "@mui/material/styles";

import {severityColourMap} from "./severity-map";

const SeverityTableCell = styled("div")(({theme: {menu}}) => ({
  color: menu.appBarText,
  fontWeight: "bold",
  textAlign: "center",
  border: "1px solid black",
  borderRadius: "15px",
}));

export default function CveSeverityTableCell({cves}: props) {
  const highestSeverity = maxBy(cves, "baseScore")?.baseSeverity || null;
  if (!highestSeverity) {
    return <TableCell />;
  }
  return (
    <TableCell>
      <SeverityTableCell sx={{background: severityColourMap(highestSeverity)}}>
        {highestSeverity}
      </SeverityTableCell>
  </TableCell>
  );
}

type props = {
  cves: cve[]
}
